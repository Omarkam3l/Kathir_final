ed!
ation needigrase matab d, so noes` tablepreferenctegory_ing `user_caes the exist: This us
**Note**---
n first

gories show those cateals from. See meepage
4k to hom3. Go bacrts)
esse., Bakery, Dories (e.gegcate avorit
2. Select feencrrences sprefeo to g

1. G
## Testin
ces systemenreferg category pistin
- âœ… Uses exsmmendation recolized
- âœ… Persona engagementâœ… Increasedence
- perier exer us Bett- âœ… first
ed innteresthey're ieals tUsers see mfits

- âœ… ene
## Bes screen
o preferencd route** t
5. **Adgories cate manager users toen** fos scree preference**Creat
4. ageomep to hsection**" or Youdd "F*A. *
3als()`dMeersonalizeall `fetchP to cscreen**e your home  **Updator
2.e SQL Editupabasion** in S SQL functthe **Run ps

1.ntation Ste Impleme`

##
``}
}
  ,
    );          ) ],
          t(),
        }).toLis             ;
           )    ,
              )        ,
 s.whiteor: ColorcheckCol                 ,
     enmaryGreors.prir: AppColiveColo   act                   tegory),
egory(caggleCat(_) => _tonged: Chaon                     ted,
 lue: isSelec va                
              ),               ),
                   ,
   or: textMain  col              
          500,.wtWeight: Foneight.bold ? FontWlected ight: isSe     fontWe                 16,
     fontSize:                        aSans(
  artaks.plusJGoogleFont  style:                      category,
               
          ext( title: T                  (
   boxListTileCheckld:       chi                ),
                  ,
          )          ? 2 : 1,
  Selected dth: is wi             
          Color, : borderimaryGreenlors.prCo ? Applected color: isSe                      (
  Border.all    border:                r(12),
  us.circulaadi BorderRderRadius:      bor              ceColor,
  surfa0.1) : city(Opa.withprimaryGreenlors.? AppCoed r: isSelectcolo                     n(
 xDecoratioration: Bo    deco               12),
  bottom:nsets.only(eI const Edg margin:                  ner(
 Contain   retur                gory);
atentains(cories.cotedCateg selec =elected   final isS            {
    category)ap((gories.m...cate                   
           ),
  x(height: 24 SizedBo   const                 ),
            ),
                 
 ub,extS  color: t            16,
      ntSize:      fo         
      (akartaSanss.plusJnte: GoogleFo      styl           ies',
 categorl te mea your favori    'Choose           
      Text(        [
     hildren:          c),
     16Insets.all(dgeconst Edding:      pa         ListView(
      :    cator())
 ssIndilarProgreculd: Cirnter(chi       ? CeLoading
      body: is  ),
   ces'),
    Preferen'Meal itle: Text( t(
       pBar: AppBar    apaffold(
     return Sc {
 t context)ntexldCouild(Bet bui
  Widgrride@ove
  }

     }      );
     ),
.red,
    : ColorsorundColkgro  bac
        eferences'), update pr'Failed toext( content: T        ackBar(
 
        Snar(nackBshowSext).(contessenger.offfoldM   Sca  e');
 gory: $ggling catent('Error to  pri   h (e) {
   } catc   );
    ),
   een,
      .primaryGrorsor: AppColol backgroundC       ),
  s updated'eferencet: Text('Prconten
          kBar(   SnackBar(
     showSnacxt).conteessenger.of(   ScaffoldM   
   
        }tegory));
 s.add(categorieselectedCaate(() =>       setSt  
      });
             
  true,enabled':ons_'notificati            ategory,
  y': c'categor            userId,
  user_id':          '{
     .insert(            ences')
ory_preferategrom('user_c  .f          supabase
        await
  preference   // Add    lse {
  e     }tegory));
 (caries.removeedCatego> select) =tate((     setS 
     
     tegory); ca'category',       .eq(rId)
     er_id', use  .eq('us          elete()
    .d     ences')
   egory_preferr_catse  .from('u    base
      it supa    awaence
    refer // Remove p{
       ) egory)ontains(catategories.clectedC     if (se;
      
 urn retId == null)  if (user
    tUser?.id;auth.curren = supabase.erIdus      final     try {
nc {
tegory) asyg catrinCategory(Stoggle<void> _re
  Futu
  }
};
    lse)ng = faoadi=> isLsetState(() e');
      s: $encefer loading prerorrint('Er
      pch (e) {
    } cat;
      })ng = false;oadi isL;
       Set() .to           ing)
Stregory'] as cat((e) => e['ap        .mst)
    as Lie = (responsegories selectedCat        tate(() {
setS     ;
      
 , true)s_enabled'otification .eq('n    d)
     id', userI  .eq('user_     ry')
   tego .select('ca)
         erences'eftegory_prer_ca.from('us          t supabase
aie = awsponsfinal re        
;
    rnetul) rrId == nulif (useid;
      er?.ntUsuth.curre supabase.a =al userId      fin try {
ync {
   erences() asPrefoid> _load  Future<v }

;
 ces()renloadPrefee();
    _ater.initSt{
    supnitState() 
  void ideerri;

  @ovtrueng = ol isLoadi  bories = {};
edCategoring> select<St Set;
  
 ies',
  ]  'Grocer  esserts',
es',
    'DVegetabl   'ood',
   'Seaftry',
  'Meat & Pouly',
    Baker',
    '  'Meals  = [
s  categorieg>trinList<S
  final reen> {rencesScyPrefetate<Categorextends Sate esScreenStyPreferencegorss _Cat;
}

claeenState()esScrryPreferencategoe() => _CcreateStateen> cresSreferencte<CategoryPe
  Sta
  @overrid.key});
({superreensScryPreferencetegoconst Ca  get {
StatefulWidnds creen exteerencesSyPrefss Categorences
clagory preferge cateto manae a screen rt
// Creat``daScreen

`nagement  MaPreferences3. Add ## }
```

#;

  )  ),],
     
          ),,
         )    ],
     
            ), ],
              ,
               )          ),
          
           o,Insets.zerge padding: Ed                  ),
                   
         size: 16,            
         ors.white,lor: Col  co           
           Icons.add,                      con(
  on: const I  ic                    },
                      cart
 // Add to                       ) {
 : (edess  onPr                n(
    : IconButto      child          
              ),        cle,
  pe.cirha shape: BoxS                   
  aryGreen,pColors.prim  color: Ap            (
        orationecxDBocoration:     de              ,
   32ght:         hei      ,
     idth: 32   w                 ontainer(
     C               ),
              ),
                      reen,
ryGprimaors. AppColor:col                      ht.bold,
Weight: FonttWeig fon                : 16,
     ntSize fo                ns(
     usJakartaSants.plGoogleFo style:           
         d(2)}',sFixece.toStringAonationPrial.d{meP $        'EG         xt(
     Te          
       [ren:ld  chi        
      ween,ceBet.spasAlignment MainAxisAlignment:ainAxi          m      ow(
     R        ight: 8),
  SizedBox(he const                 ),
  
        is,ipsellrflow.ow: TextOve      overfl          : 1,
    maxLines          
          ),
        xtSub,r: te        colo
          tSize: 12,         fon     
    ans(taSusJakareFonts.plooglle: G     sty        ,
   .nameantal.restaur        met(
         Tex        4),
      ox(height:t SizedBcons               ),
      ,
       psisrflow.ellivelow: TextO  overf           
   s: 1,axLine         m),
                 n,
      xtMai te     color:           ,
  ght.boldFontWeiontWeight:    f      ,
         e: 14Siz       font      
     (nssJakartaSa.pluogleFontsstyle: Go          e,
      tl meal.ti               ext(
      T        hildren: [
       crt,
     stanment.ssAxisAlig Cronment:isAligAx cross          Column(
        child:  2),
  Insets.all(1onst Edge: c padding
           Padding(nt
      onte     // C      
   
  ,
        )    ],    ),
                      ),

        ),                   ),
    ,
         lors.whitelor: Co         co
           eight.bold,ght: FontW     fontWei         0,
      fontSize: 1                  taSans(
  plusJakargleFonts.Gootyle:        s       egory,
     meal.cat                 ext(
d: T    chil          
  ,      )        8),
  ular(rcius.ciRad: BorderrderRadius  bo               
 en,ryGrerimas.pppColor: A   color               on(
Decoratin: Boxcoratio      de
          ical: 4),: 8, vertizontalymmetric(horts.sgeInset Edconspadding:            er(
     ontainchild: C           8,
    left:        
      op: 8,           ted(
   tion Posi      ),
                         ),
ver,
      it.co   fit: BoxF         0,
      height: 14        
       200,dth:          wi      imageUrl,
meal.                k(
ornetwImage.  child:           (16)),
  .circularusdial(top: Ra.verticusRadiconst Border: borderRadius         
     lipRRect(      C    ren: [
  ld  chi(
             Stack  
 dgeategory ba ce with     // Imag: [
      children,
   t.startnmenossAxisAlig CrsAlignment:xirossA
      clumn(hild: Co  ),
    c
       ],    ),
 
    t(0, 4),t Offsefset: cons         ofus: 10,
 blurRadi      0.05),
    y(itthOpaclack.wirs.bolor: Colo c  
       oxShadow(  B[
      w: hado      boxSrColor),
lor: border.all(cordeder: Bo
      bor),r(16uladius.circerRaius: BordrderRad
      bofaceColor,lor: sur    cotion(
  BoxDecoraion: ecorat 12),
    dht:y(rigInsets.onl Edge: const
    margin 200,  width:  ontainer(

  return Ceal) {Offer m(MealizedMealCardldPersonalidget _bui

W,
  );
} ]
     ),    ,

        )          },
s[index]);izedMealrd(personalealCasonalizedMdPerturn _buil     re       ex) {
t, indontex (cBuilder:      item
    ngth,.leizedMealsalrson peount:      itemC),
    tal: 16zonric(ho.symmetrit EdgeInsetsg: consddin   pa,
       talxis.horizonection: Air  scrollD
        lder(istView.bui: Lhild    c   0,
  28ight:        heedBox(
  Sizrds
    l caing meacrolll sHorizonta 
      //      ight: 16),
heSizedBox(const 
      ,
      ),
        ) ],          ),
  
                ), ),
                  een,
    yGr.primarppColorsolor: A     c           ,
  ht.w600tWeigt: Fonigh  fontWe                ,
14ze: fontSi                  rtaSans(
ts.plusJaka GoogleFon     style:        t',
      'Edi   
          ild: Text(         ch     es'),
'/preferencntext.push( => coed: ()  onPress   
         tButton(Tex           ),
         
         ],             ),
  
             ),          b,
     Sucolor: text          
          Size: 12,     font           
    (taSansplusJakareFonts.style: Googl                
  es',ncefere on your prsed 'Ba            ext(
         T          ),
                   ),
               in,
  or: textMa        col     
       old,t.bighFontWentWeight: fo              
      e: 20,   fontSiz           
      Sans(.plusJakartatsGoogleFontyle:  s                 
 You',        'For        (
       Text         dren: [
      chil    
      t,gnment.starxisAli CrossAnt:gnmeliisA     crossAx    (
     Column     
       ren: [hild c        
 een,aceBetwnment.spAligainAxist: MnmenligAxisA main(
         d: Row      chill: 16),
  orizontametric(hymeInsets.sg: const Edg   paddinng(
         Paddi
  children: [    art,
nt.stAxisAlignmeossent: CrgnmsAli crossAxi(
   mnlu
  return Coction() {YouSeet _buildFor
Widgmepageo your hos section t
// Add thi```dartmepage

ection to Ho"For You" S. Add ``

### 2
  }
}
`turn [];;
    re$e')als: alized meontching pers ferint('Error
    p (e) { catchist();
  }toL  .     
 Json(json))alOffer.from=> Me.map((json) 
         List) asonseresp  return (   
  lect();
 se . })
            ,
  20limit':   'p_      userId,
  p_user_id':   '     
   ams: {s', pareallized_mersona('get_p.rpc       abase
 await supse = nal responfi
    
    ;
    }lMeals()etchAln fretur     
 ealstch all mgged in, fe// If not lo {
      Id == null)ser;
    if (ur?.id.currentUseauthpabase.surId = inal use  f
   {
  trys() async {dMealPersonalizefetch> r>ealOffere<List<MFutudel
ewmor home vi
// In you``darts:

`mealonalized h persetchod to f metdd
A
Modeln View Screee Homedat
### 1. Upentation
lemImputter  Fl``

##
`ticated;henTO autid, int) uus(nalized_mealON get_perso FUNCTIUTE ONNT EXECission
GRApermute xec eGrant
-- ;
ND;
$$ END IF;
E
 p_limit;
    LIMIT ESCted_at D m.crea END,
     LSE 10 E) THEN goriesser_catey = ANY(v_u m.categorCASE WHEN      R BY 
)
    ORDEOW(y_date > NAND m.expir> 0
      _available .quantityAND m
       = 'active'E m.statusER
    WHle_idr.profiurant_id = stas r ON m.rerestaurant  LEFT JOIN 
  s mmealg
    FROM      r.ratint_name,
 anaur      r.restate,
xpiry_d  m.e
    y_available,antit    m.quce,
  ted_priiscoun   m.de,
   iginal_pric m.or
     rl, m.image_ury,
     ego m.cat   
  tion,escrip  m.dtle,
    
      m.tiaurant_id,      m.rest m.id,

     ELECT     SUERY
ETURN Q    R
n othersst, thetegories fire caritavong user's f matchials-- Return me    ;
  ELSE
_limit  LIMIT p
  DESCd_at reatem.cDER BY 
    OR > NOW()expiry_date  AND m.    lable > 0
uantity_avai AND m.q'
     vetus = 'actiRE m.sta    WHEe_id
 r.profil_id =aurantest.rts r ON m restauranEFT JOIN m
    L  FROM mealsing
     r.ratme,
   _naurantesta r.rate,
     m.expiry_d    lable,
  y_avaim.quantit,
      ceriscounted_p  m.dirice,
    inal_p     m.orig
 rl,mage_u
      m.iegory,
      m.catption,    m.descrititle,
  m.id,
      .restaurant_id,
      m m.    T 
  SELEC  RN QUERY
 EN
    RETU 0 TH) =ategories, 1gth(v_user_cen array_l NULL ORegories ISer_cats
  IF v_usurn all mealrences, ret no prefeuser has
  -- If rue;
  abled = tions_entificat  AND noser_id
  p_uuser_id =  WHERE eferences
 _prser_categoryROM uories
  Fr_categO v_useory)
  INTay_agg(categ SELECT arrgories
 rite cate user's favo-- Get  

BEGINies text[];er_categor v_usE
  $$
DECLAR
ASqlgsLANGUAGE plp = public
rch_pathNER
SET seaTY DEFIURIEC
S
)e precisionbling douurant_rattaxt,
  resame teaurant_nresttz,
  ampate timesty_d  expirle int,
_availab
  quantityric, numerice_punted,
  discoeric_price numriginaltext,
  omage_url 
  iory text,,
  categtextion 
  descriptext,le t,
  titnt_id uuidstaura
  reid,E (
  id uuRETURNS TABL

)T 20 DEFAULt int  p_limid uuid,
 p_user_ieals(
 d_mpersonalizeNCTION get_EPLACE FU R
CREATE ORgoriesite cate's favorusern based oeals  Get m
```sql
--:
lsed measonalizet pero g ta functiony

Create Querse bata## Daerences.

 their prefgories frommeal cateorite ser's favbased on uhomepage als on  me
Showview
Feature Overences

## fer on User Preedepage Bas Homnalizedrso# ðŸŽ¯ Pe